[build-system]
requires = [
	"setuptools>=45",
	"wheel",
	"setuptools_scm[toml]>=6.0",
	"jinja2==3.0.1",  # required to run bootstrap.sh when installing the spead2 submodule
	"pycparser==2.20",  # required to run bootstrap.sh when installing the spead2 submodule
	"pybind11==2.6.2",  # wrapping C++ functions in python
]

[tool.setuptools_scm]

[tool.black]
line-length = 120
include = '\.pyi?$'
exclude ='''
/(
		  \.eggs	# exclude a few common directories
		| \.git		# in the root of the project
		| \.hg
		| \.mypy_cache
		| \.nox
		| \.tox
		| \.venv
		| _build
		| buck-out
		| build
		| dist
)/
'''

[tool.isort]
profile = "black"
line_length = 120
skip_glob = ["3rdparty/*"]

[tool.pytest.ini_options]
testpaths = "test"
addopts = "--cov-context=test --cov-report html --import-mode=prepend"
filterwarnings = [
	'ignore:`np\..*` is a deprecated alias::pycuda\.compyte\.dtypes',
	'ignore:`np\..*` is a deprecated alias::skcuda\.misc',
	'ignore:creating CUBLAS context to get version number::skcuda\.cublas',
]

[tool.coverage.run]
branch = true
command_line = "-m pytest"
source = [
	"katgpucbf",
	"test/",
]

[tool.coverage.html]
show_contexts = true
